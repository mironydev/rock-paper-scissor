<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css" integrity="sha512-2SwdPD6INVrV/lHTZbO2nodKhrnDdJK9/kg2XD1r9uGqPo1cUbujc+IYdlYdEErWNu69gVcYgdxlmVmzTWnetw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <title>Rock, Paper, Scissor!</title>
</head>
<body class="bg-black text-white font-mono">
  
  <div class="flex flex-wrap justify-center sm:gap-10 mt-20 px-20 gap-7">

    <button id="rock"

    onclick="playGame ('Rock');
    "
    
    class="bg-gray-300 hover:bg-white duration-150 text-black font-bold text-2xl px-9 py-2 rounded-lg hover:scale-110">Rock <i class="fa-solid fa-hand-back-fist"></i></button>

    <button id="paper"
    
    onclick="playGame ('Paper');
    "
    
    class="bg-gray-300 hover:bg-white duration-150 text-black font-bold text-2xl px-8 py-2 rounded-lg hover:scale-110">Paper <i class="fa-solid fa-hand"></i></button>

    <button id="scissor"
    
    onclick="playGame ('Scissor');"
    
    class="bg-gray-300 hover:bg-white duration-150 text-black font-bold text-2xl px-4 py-2 rounded-lg hover:scale-110">Scissor <i class="fa-solid fa-hand-scissors"></i></button>

  </div>


  <div class="flex justify-center mt-10">

    <button id="reset"
    
    onclick="
      score.win = 0;
      score.lose = 0;
      score.tie = 0;
      localStorage.removeItem('score');
      updateScore();
      clearText();
      resetScale();
      "
    
    class="bg-red-500 text-white font-bold text-xl px-4 py-2 rounded-lg transition-all duration-150 ease-in-out">Reset Score</button>

  </div>

  <div class="text-white flex flex-col text-center justify-center items-center  mt-10 gap-5 text-2xl px-5">
    <p class="js-result text-4xl font-bold"></p>
    <p class="js-moves"></p>
    <p class="js-score"></p>
  </div>
  

  <script>
    let score = JSON.parse(localStorage.getItem('score')) || {win: 0,lose: 0, tie:0};

    updateScore();

    function playGame (playerMove) {
      const computerMove = pickComputerMove();
      let result = '';

      if (playerMove === 'Scissor') {
        if (computerMove === 'Rock') {
          result = 'You Lose'
        } else if (computerMove === 'Paper') {
          result = 'You Win';
        } else if (computerMove === 'Scissor') {
          result = 'Tie';
        }

      } else if (playerMove === 'Paper') {
        if (computerMove === 'Rock') {
          result = 'You Win'
        } else if (computerMove === 'Paper') {
          result = 'Tie';
        } else if (computerMove === 'Scissor') {
          result = 'You Lose';
        }
        
      } else if (playerMove === 'Rock') {
        if (computerMove === 'Rock') {
          result = 'Tie'
        } else if (computerMove === 'Paper') {
          result = 'You Lose';
        } else if (computerMove === 'Scissor') {
          result = 'You Win';
        }
      }

      if (result === 'You Win') {
        score.win += 1;
      } else if (result === 'You Lose') {
        score.lose += 1;
      } else if (result === 'Tie') {
        score.tie += 1;
      }

      localStorage.setItem('score', JSON.stringify(score));

      const resultEL = document.querySelector('.js-result');
      resultEL.classList.remove('text-green-500', 'text-red-500', 'text-yellow-300');
      if (result === 'You Win') {
        resultEL.classList.add('text-green-500');
      } else if (result === 'You Lose') {
        resultEL.classList.add('text-red-500');
      } else if (result === 'Tie') {
        resultEL.classList.add('text-yellow-300');
      }
      resultEL.classList.add('scale-150', 'duration-150');
      setTimeout(() => {
        resultEL.classList.remove('scale-150', 'duration-150');
      }, 150);

      resultEL.innerHTML = result;

      document.querySelector('.js-moves').innerHTML = `You picked ${playerMove}, Opponent picked ${computerMove}`;

      updateScore();
    }

    function resetScale() {
      const reset = document.getElementById('reset');
      reset.classList.add('scale-[1.2]', 'bg-red-400');
      setTimeout(() => {
        reset.classList.remove('scale-[1.2]', 'bg-red-400');
      }, 150);
    }
    

    function clearText() {
      document.querySelector('.js-result').innerHTML = '';
      document.querySelector('.js-moves').innerHTML = '';
    }

    function updateScore() {
      document.querySelector('.js-score').innerHTML =
      `Wins: <span class="text-green-500">${score.win}</span>,
      Losses: <span class="text-red-500">${score.lose}</span>,
      Ties: <span class="text-yellow-300">${score.tie}</span> `;
    }

    function pickComputerMove() {
      const randomNumber = Math.random();
      let computerMove = '';
      if (randomNumber >= 0 && randomNumber < 1/3) {
          computerMove = 'Rock';
      }
      else if (randomNumber >= 1/3 && randomNumber < 2/3) {
          computerMove = 'Paper';
      }
      else if (randomNumber >= 2/3 && randomNumber < 1) {
          computerMove = 'Scissor';
      }
      return computerMove;
    }
  </script>
</body>
</html>